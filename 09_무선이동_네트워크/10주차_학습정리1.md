# 19. CSMA/CA

두 호스트가 사용하는 주파수가 서로 오버랩되지 않는 주파수라면 서로 충돌을 일으키지 않음

만약 오버랩되는 주파수를 사용했다면 두 호스트는 같은 collision 도메인에 있게 됨

동일한 채널에 속한 AP가 많아질수록 충돌이 많아짐 -> backoff가 잦아짐

**RTS-CTS**

결국 충돌은 일어나기 마련인데 피해를 줄이기 위해 사용

## Wi-Fi의 프레임 구조

특징은 어드레스 필드가 4개, 아래의 상황 때문에

AP는 한 쪽은 유선, 한 쪽은 무선 네트워크와 연결되어있음

AP는 무선 인터페이스(Wi-Fi 입장)와 유선 인터페이스(라우터 입장)를 모두 가지고 있음.

Wi-Fi 호스트 입장에서 MAC어드레스가 있으므로 링크 레이어에서 보임
유선 인터페이스에서는 인터넷 세상에서는 안보임(스위치이므로)

양쪽 인터페이스에서 필요한 정보가 다름, 멀티플렉싱 해야 하는데 한 쪽 인터페이스에서 보낸 정보를 이해하지 못함

### 프레임을 만들기 위해 필요한 주소를 얻는 방법

각 AP들이 자신들의 AP의 이름,MAC addr를 담은 비컨메시지를 브로드캐스트함 -> 쉽게 알 수 있는 정보

라우터의 MAC addr은 어떻게 알지? DHCP를 통해서 내 IP addr, subnet mask, GDR IP, Local NS IP

라우터의 MAC 주소를 알기 위해 결국 ARP 테이블을 참조함, ARP 리퀘스트 안해도 DHCP 갔다가 오면 알게 됨

## 다른 Frame 요소

- frame control : 16비트
  - type: RTS, CTS, ACK, data(2비트)
- duration, ...

# Mobility가 도입된다면

## 같은 서브넷 내에서의 mobility

물리적인 이동 중에 연결된 AP가 계속 바뀔 것

-> connection : TCP (소켓 - 소켓)

-> 유일한 TCP 커넥션을 어떻게 인덱싱하지? srcIp, port, destIp, port로 인덱싱함 (전 세계에 존재하는 모든 TCP connection 중에 같은 게 하나도 없음)

이 4가지는 같은 서브넷에서는 안바뀜, self-learning을 이용하기 때문에 그대로 유지할 수 있음

LTE 같은 통신은 통신사의 서브넷이 엄청 크기 때문에 안끊기는 것
